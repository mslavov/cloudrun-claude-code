# Google Cloud Configuration
PROJECT_ID=your-project-id
REGION=us-central1

# Service Configuration
SERVICE_NAME=qa-agent
REPOSITORY=claude-code
IMAGE_NAME=claude-code
TAG=latest

# Resource Configuration
CPU=2
MEMORY=4Gi
TIMEOUT=3600  # Cloud Run Jobs support up to 24 hours (86400 seconds) for long-running Claude tasks
CONCURRENCY=3  # Lower concurrency = more resources per request (1.3GB RAM, 0.66 CPU each)
MIN_INSTANCES=0
MAX_INSTANCES=10

# Network Configuration (optional)
ENABLE_VPC=false
VPC_NETWORK=default
VPC_SUBNET=serverless-subnet
SUBNET_RANGE=10.0.0.0/28

# Claude Code Configuration
ALLOWED_TOOLS=Read,Write,Grep,Bash(npm run test:*),WebSearch
PERMISSION_MODE=acceptEdits

# Cloud Run Jobs Architecture (REQUIRED for both /run and /run-async endpoints)
GCS_LOGS_BUCKET=your-project-id-claude-logs  # GCS bucket for task logs and encrypted payloads
GCS_PROJECT_ID=your-project-id               # Optional, defaults to PROJECT_ID

# Cloud KMS Configuration (REQUIRED - created by setup-kms.sh)
KMS_KEY_RING=claude-code                      # KMS key ring name
KMS_KEY_NAME=payload-encryption               # KMS key name
KMS_LOCATION=global                           # KMS location

# Cloud Run Job Configuration (REQUIRED - created by deploy-job.sh)
CLOUDRUN_JOB_NAME=claude-code-job             # Cloud Run Job name

# Webhook Security (Required for /run-async endpoint)
CLOUDRUN_CALLBACK_SECRET=                     # Secret for HMAC webhook authentication (generate with: openssl rand -hex 32)

# Advanced Configuration (optional)
# DANGEROUSLY_SKIP_PERMISSIONS=false  # Set to 'true' to bypass all tool permissions (USE WITH CAUTION)

# Logging Configuration
# LOG_LEVEL=info                      # Global log level: 'debug', 'info', 'warn', 'error' (default: 'info' in production, 'debug' in development)
#
# Per-Module Log Levels (override global LOG_LEVEL for specific modules):
# LOG_LEVEL_CLAUDE_RUNNER=debug       # Detailed Claude CLI startup, args, and execution logs
# LOG_LEVEL_PROXY=warn                # Suppress noisy proxy request/response logs (every API call)
# LOG_LEVEL_TASK=info                 # Task initialization, workspace setup, SSH key configuration
# LOG_LEVEL_GCS=info                  # GCS storage operations, log uploads, encryption/decryption
#
# Example: Enable debug logs only for claude-runner while keeping others quiet
# LOG_LEVEL=info
# LOG_LEVEL_CLAUDE_RUNNER=debug
# LOG_LEVEL_PROXY=warn

# Authentication & SSH Keys (Optional - for local testing only)
# IMPORTANT: The service uses PAYLOAD-BASED credentials
# - API keys/OAuth tokens: Passed in request payload (anthropicApiKey/anthropicOAuthToken)
# - SSH keys: Passed in request payload (sshKey parameter)
# All credentials use per-request isolation for maximum security
# These env vars are only used for local testing with test.sh script
# ANTHROPIC_API_KEY=sk-ant-...  # For local testing only
